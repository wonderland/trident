<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Preparation</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Preparation" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/trident/trident-use/ontap-nas-prep.html" />
	<meta property="og:description" content="Learn about how to prepare to configure an ONTAP backend with ONTAP NAS drivers." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/trident/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="Learn about how to prepare to configure an ONTAP backend with ONTAP NAS drivers.">
  <meta name="keywords" content=" trident backend, ontap nas, ontap-nas, ontap-nas-economy, ontap-nas-flexgroups">
  
  

  <!-- Icons -->
  <link rel="icon" href="/us-en/trident/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/trident/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/trident/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/trident/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/trident/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/trident/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/trident/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/trident/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/trident/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/trident/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/trident/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/trident/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/trident/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/us-en/trident/css/landing-page.css" type="text/css">
  <link rel="stylesheet" href="/us-en/trident/css/tabbed-blocks.css" type="text/css">
  <link rel="stylesheet" href='/us-en/trident/css/product-family.css' type="text/css">
  

  
  <link rel='stylesheet' href='/us-en/trident/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/us-en/trident/js/na-search.js'></script>
  

  
  <script src='/us-en/trident/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/us-en/trident/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/trident/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/trident/js/na-utility.js'></script>
  <script src='/us-en/trident/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/us-en/trident/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/trident/js/toc.js'></script>
  <script src='/us-en/trident/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
  <script src='/us-en/trident/js/version-dropdown.js'></script>
  <script src='/us-en/trident/js/product-family.js'></script>
  <script src='/us-en/trident/js/FileSaver.min.js'></script>
  <script src='/us-en/trident/js/jszip-utils.min.js'></script>
  <script src='/us-en/trident/js/jszip.min.js'></script>
  <script src='/us-en/trident/js/pdf-ux.js'></script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/trident/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/trident/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/trident/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" 
          data-search-html="/us-en/trident/search.html"
          data-type="widget" 
          data-placeholder="Search Documentation" 
          data-no-results-found="No results were found for {query}" 
          data-did-you-mean="Search for {suggestion}." 
          data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" 
          data-results-found="{hitCount} results found"  
          data-sk-es-pf-indexes=""></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar">
    <!-- Start Language Selector --><div id="ie-i18n" class="n-property-bar__lang-selector">
      <div id="ie-i18n-menu">
      <span class="ie-i18n-lang">English</span>
        <button class="ie-i18n-icon-container" type="button">
          <svg class="n-globe__icon" aria-labelledby="title">
            <title>globe</title>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#globe"></use>
          </svg>
        </button>
      </div>
      <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
        <div class="n-language-selector-menu">
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list"><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/us-en/trident/trident-use/ontap-nas-prep.html" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ja-jp/trident/trident-use/ontap-nas-prep.html" class="n-menu__header-text"><span translate="no" class="notranslate">日本語</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-cn/trident/trident-use/ontap-nas-prep.html" class="n-menu__header-text"><span translate="no" class="notranslate">简体中文</span></a>
                </li></ul>
            </li>
          </ul>
        </div>
      </div>
    </div><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">
    <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>Available PDFs<span>
    </span>
  </a>
</div>
<div class="n-pdf-body-container">
  <ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><li class="pdf-ux-container">
        <a target="_blank" href="/us-en/trident/pdfs/fullsite-sidebar/Astra_Trident_21_10_documentation.pdf" >
          <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>PDF of this doc site</a>





    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Concepts.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Concepts
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Get_started.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Get started
          </a>
          







    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Deploy_with_Trident_operator.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Deploy with Trident operator
          </a>
          



          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Deploy_with_tridentctl.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Deploy with tridentctl
          </a>
          



          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Manage_Astra_Trident.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Manage Astra Trident
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Use_Astra_Trident.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Use Astra Trident
          </a>
          

    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Configure_backends.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Configure backends
          </a>
          









    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Configure_a_backend_with_ONTAP_SAN_drivers.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Configure a backend with ONTAP SAN drivers
          </a>
          





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Configure_a_backend_with_ONTAP_NAS_drivers.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Configure a backend with ONTAP NAS drivers
          </a>
          
    <ul class="subfolders" style="display:none;"><li class="active pdf-hide">
  <a target="_blank" href="/us-en/trident/pdfs/pages/trident-use/ontap-nas-prep.pdf" >
    <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
    PDF of this page
  </a>
</li>

</ul>
  





          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Perform_volume_operations.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Perform volume operations
          </a>
          









          
        </li>
      </ul>
    

  









          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Astra_Trident_for_Docker.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Astra Trident for Docker
          </a>
          







    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Work_with_volumes.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Work with volumes
          </a>
          



          
        </li>
      </ul>
    

  











          
        </li>
      </ul>
    

  









    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Best_practices_and_recommendations.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Best practices and recommendations
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          <a target="_blank" 
            
              href="/us-en/trident/pdfs/sidebar/Reference.pdf" 
            
          >
            <img src="/us-en/trident/images/pdf.png" width="16" height="16"/>
            Reference
          </a>
          













          
        </li>
      </ul>
    

  






</li></ul>
  <div class="zip-pdf-link-container" style="display: none;">   
    <a href="#" id="zipPdf">
      <img src="/us-en/trident/images/pdf-zip.png" width="16" height="16"/>
      <pre>Collection of separate PDF docs<span class="zip-size"></span></pre>
    </a><div id="zip-link-popup" class="hide">
    <div class="inner-modal">
        <div class="downloading-progress">
            <div class="spinner"></div>
            <h1>Creating your file...</h1>
            <div>This may take a few minutes. Thanks for your patience.</div>
            <button class="cancel-download-btn" type="button">Cancel</button>
        </div>
        <div class="download-complete hide">
            <div class="done-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
            </div>
            <div>Your file is ready</div>
            <button class="cancel-download-btn" type="button">OK</button>
        </div>
    </div>
</div>
<script>
    $(".cancel-download-btn").click(function(){
        $("#zip-link-popup").addClass("hide");
        $("#zip-link-popup .downloading-progress").removeClass("hide");
        $("#zip-link-popup .download-complete").addClass("hide");
    });
</script></div>
</div>
<script>
  $("#toggleContainerPdf li.active:last-child").parents('ul.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
    $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
  });
</script><div class="sidebar-nav-container">
  <ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/us-en/trident/index.html">
        Astra Trident docs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-rn.html">
        Release notes
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Concepts</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-concepts/intro.html">
        Intro to Astra Trident
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-concepts/ontap-drivers.html">
        ONTAP drivers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-concepts/provisioning.html">
        Provisioning
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-concepts/snapshots.html">
        Volume snapshots
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-concepts/virtual-storage-pool.html">
        Virtual storage pools
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-concepts/vol-access-groups.html">
        Volume access groups
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Get started</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-get-started/quickstart.html">
        Try it out
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-get-started/requirements.html">
        Requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-get-started/kubernetes-deploy.html">
        Deployment overview
      </a></li><li class="subfolders "><a href="/us-en/trident/trident-get-started/kubernetes-deploy-operator.html">
        <div class="na-navbar-padding"> Deploy with Trident operator</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-get-started/kubernetes-customize-deploy.html">
        Customize Trident operator deployment
      </a></li></ul></li><li class="subfolders "><a href="/us-en/trident/trident-get-started/kubernetes-deploy-tridentctl.html">
        <div class="na-navbar-padding"> Deploy with tridentctl</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-get-started/kubernetes-customize-deploy-tridentctl.html">
        Customize tridentctl deployment
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-get-started/kubernetes-postdeployment.html">
        What's next?
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Manage Astra Trident</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-managing-k8s/upgrade-trident.html">
        Upgrade Astra Trident
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-managing-k8s/upgrade-operator.html">
        Upgrade with the operator
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-managing-k8s/upgrade-tridentctl.html">
        Upgrade with tridentctl
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-managing-k8s/uninstall-trident.html">
        Uninstall Astra Trident
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-managing-k8s/downgrade-trident.html">
        Downgrade Astra Trident
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use Astra Trident</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/trident/trident-use/backends.html">
        <div class="na-navbar-padding"> Configure backends</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/anf.html">
        Configure an ANF backend
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/aws.html">
        Configure a CVS for AWS backend
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/gcp.html">
        Configure a CVS for GCP backend
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/element.html">
        Configure a NetApp HCI or SolidFire backend
      </a></li><li class="subfolders "><a href="/us-en/trident/trident-use/ontap-san.html">
        <div class="na-navbar-padding"> Configure a backend with ONTAP SAN drivers</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/ontap-san-prep.html">
        Preparation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/ontap-san-examples.html">
        Configuration options and examples
      </a></li></ul></li><li class="subfolders "><a href="/us-en/trident/trident-use/ontap-nas.html">
        <div class="na-navbar-padding"> Configure a backend with ONTAP NAS drivers</div>
      </a>
      <ul><li class="  active "><a class="na-navbar-padding" href="/us-en/trident/trident-use/ontap-nas-prep.html">
        Preparation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/ontap-nas-examples.html">
        Configuration options and examples
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/trident-fsx.html">
        Use Astra Trident with Amazon FSx for NetApp ONTAP
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/backend-kubectl.html">
        Create backends with kubectl
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/backend_ops_kubectl.html">
        Perform backend management with kubectl
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/backend_ops_tridentctl.html">
        Perform backend management with tridentctl
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/backend_options.html">
        Move between backend management options
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/manage-stor-class.html">
        Manage storage classes
      </a></li><li class="subfolders "><a href="/us-en/trident/trident-use/vol-operations.html">
        <div class="na-navbar-padding"> Perform volume operations</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/csi-topology.html">
        Use CSI Topology
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/vol-snapshots.html">
        Work with snapshots
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/vol-expansion.html">
        Expand volumes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/vol-import.html">
        Import volumes
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/worker-node-prep.html">
        Prepare the worker node
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/automatic-workernode.html">
        Automatic worker node preparation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-use/monitor-trident.html">
        Monitor Astra Trident
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Astra Trident for Docker</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/prereqs-docker.html">
        Prerequisites for deployment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/deploy-docker.html">
        Deploy Astra Trident
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/upgrade-uninstall-docker.html">
        Upgrade or uninstall Trident
      </a></li><li class="subfolders "><a href="/us-en/trident/trident-docker/volumes-docker.html">
        <div class="na-navbar-padding"> Work with volumes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/volume-driver-options.html">
        Driver-specific volume options
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/collect-logs-docker.html">
        Collect logs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/multiple-instances-docker.html">
        Manage multiple Astra Trident instances
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/stor-config.html">
        Storage configuration options
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-docker/known-issues-docker.html">
        Known issues
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/faq.html">
        FAQs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/get-help.html">
        Support
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/troubleshooting.html">
        Troubleshooting
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Best practices and recommendations</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reco/deploy-reco.html">
        Deployment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reco/storage-config-best-practices.html">
        Storage configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reco/integrate-trident.html">
        Astra Trident integration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reco/backup.html">
        Data protection
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reco/security-reco.html">
        Security
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Reference</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reference/trident-ports.html">
        Astra Trident ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reference/rest-api.html">
        Astra Trident REST API
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reference/trident-cl.html">
        Command-line options
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reference/k8s-netapp.html">
        NetApp products integrated with Kubernetes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reference/objects.html">
        Kubernetes and Astra Trident objects
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/trident-reference/tridentctl.html">
        tridentctl commands and options
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/earlier-versions.html">
        Earlier versions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/trident/legal.html">
        Legal notices
      </a></li></ul>
</div>
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/trident/">Astra&nbsp;Trident</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Preparation
        </li>
      </ul>
    </div>
    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>

      <div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Preparation</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2021-10-15 01:43:27 +0000">10/15/2021</time>
    
  

<span>Contributors
</span>


</p>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Learn about how to prepare to configure an ONTAP backend with ONTAP NAS drivers. For all ONTAP backends, Astra Trident requires at least one aggregate assigned to the SVM.</p>
</div>
<div class="paragraph">
<p>For all ONTAP backends, Astra Trident requires at least one aggregate assigned to the SVM.</p>
</div>
<div class="paragraph">
<p>Remember that you can also run more than one driver, and create storage classes that point to one or the other. For example, you could configure a Gold class that uses the <code>ontap-nas</code> driver and a Bronze class that uses the <code>ontap-nas-economy</code> one.</p>
</div>
<div class="paragraph">
<p>All of your Kubernetes worker nodes must have the appropriate NFS tools installed. See <a href="worker-node-prep.html" target="_blank" rel="noopener">here</a> for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authentication">Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Astra Trident offers two modes of authenticating an ONTAP backend.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Credential-based: The username and password to an ONTAP user with the required permissions. It is recommended to use a pre-defined security login role, such as <code>admin</code> or <code>vsadmin</code> to ensure maximum compatibility with ONTAP versions.</p>
</li>
<li>
<p>Certificate-based: Astra Trident can also communicate with an ONTAP cluster using a certificate installed on the backend. Here, the backend definition must contain Base64-encoded values of the client certificate, key, and the trusted CA certificate if used (recommended).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Users can also choose to update existing backends, opting to move from credential-based to certificate-based, and vice-versa. If <strong>both credentials and certificates are provided</strong>, Astra Trident will default to using certificates while issuing a warning to remove the credentials from the backend definition.</p>
</div>
<div class="sect2">
<h3 id="enable-credential-based-authentication">Enable credential-based authentication</h3>
<div class="paragraph">
<p>Astra Trident requires the credentials to an SVM-scoped/cluster-scoped admin to communicate with the ONTAP backend. It is recommended to make use of standard, pre-defined roles such as <code>admin</code> or <code>vsadmin</code>. This ensures forward compatibility with future ONTAP releases that might expose feature APIs to be used by future Astra Trident releases. A custom security login role can be created and used with Astra Trident, but is not recommended.</p>
</div>
<div class="paragraph">
<p>A sample backend definition will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "version": 1,
  "backendName": "ExampleBackend",
  "storageDriverName": "ontap-nas",
  "managementLIF": "10.0.0.1",
  "dataLIF": "10.0.0.2",
  "svm": "svm_nfs",
  "username": "vsadmin",
  "password": "secret",
}</pre>
</div>
</div>
<div class="paragraph">
<p>Keep in mind that the backend definition is the only place the credentials are stored in plain text. After the backend is created, usernames/passwords are encoded with Base64 and stored as Kubernetes secrets. The creation/updation of a backend is the only step that requires knowledge of the credentials. As such, it is an admin-only operation, to be performed by the Kubernetes/storage administrator.</p>
</div>
</div>
<div class="sect2">
<h3 id="enable-certificate-based-authentication">Enable certificate-based Authentication</h3>
<div class="paragraph">
<p>New and existing backends can use a certificate and communicate with the ONTAP backend. Three parameters are required in the backend definition.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>clientCertificate: Base64-encoded value of client certificate.</p>
</li>
<li>
<p>clientPrivateKey: Base64-encoded value of associated private key.</p>
</li>
<li>
<p>trustedCACertificate: Base64-encoded value of trusted CA certificate. If using a trusted CA, this parameter must be provided. This can be ignored if no trusted CA is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A typical workflow involves the following steps.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Generate a client certificate and key. When generating, set Common Name (CN) to the ONTAP user to authenticate as.</p>
<div class="listingblock">
<div class="content">
<pre>openssl req -x509 -nodes -days 1095 -newkey rsa:2048 -keyout k8senv.key -out k8senv.pem -subj "/C=US/ST=NC/L=RTP/O=NetApp/CN=admin"</pre>
</div>
</div>
</li>
<li>
<p>Add trusted CA certificate to the ONTAP cluster. This might be already handled by the storage administrator. Ignore if no trusted CA is used.</p>
<div class="listingblock">
<div class="content">
<pre>security certificate install -type server -cert-name &lt;trusted-ca-cert-name&gt; -vserver &lt;vserver-name&gt;
ssl modify -vserver &lt;vserver-name&gt; -server-enabled true -client-enabled true -common-name &lt;common-name&gt; -serial &lt;SN-from-trusted-CA-cert&gt; -ca &lt;cert-authority&gt;</pre>
</div>
</div>
</li>
<li>
<p>Install the client certificate and key (from step 1) on the ONTAP cluster.</p>
<div class="listingblock">
<div class="content">
<pre>security certificate install -type client-ca -cert-name &lt;certificate-name&gt; -vserver &lt;vserver-name&gt;
security ssl modify -vserver &lt;vserver-name&gt; -client-enabled true</pre>
</div>
</div>
</li>
<li>
<p>Confirm the ONTAP security login role supports <code>cert</code> authentication method.</p>
<div class="listingblock">
<div class="content">
<pre>security login create -user-or-group-name admin -application ontapi -authentication-method cert
security login create -user-or-group-name admin -application http -authentication-method cert</pre>
</div>
</div>
</li>
<li>
<p>Test authentication using certificate generated. Replace &lt;ONTAP Management LIF&gt; and &lt;vserver name&gt; with Management LIF IP and SVM name.</p>
<div class="listingblock">
<div class="content">
<pre>curl -X POST -Lk https://&lt;ONTAP-Management-LIF&gt;/servlets/netapp.servlets.admin.XMLrequest_filer --key k8senv.key --cert ~/k8senv.pem -d '&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;netapp xmlns="http://www.netapp.com/filer/admin" version="1.21" vfiler="&lt;vserver-name&gt;"&gt;&lt;vserver-get&gt;&lt;/vserver-get&gt;&lt;/netapp&gt;'</pre>
</div>
</div>
</li>
<li>
<p>Encode certificate, key and trusted CA certificate with Base64.</p>
<div class="listingblock">
<div class="content">
<pre>base64 -w 0 k8senv.pem &gt;&gt; cert_base64
base64 -w 0 k8senv.key &gt;&gt; key_base64
base64 -w 0 trustedca.pem &gt;&gt; trustedca_base64</pre>
</div>
</div>
</li>
<li>
<p>Create backend using the values obtained from the previous step.</p>
<div class="listingblock">
<div class="content">
<pre>$ cat cert-backend-updated.json
{
"version": 1,
"storageDriverName": "ontap-nas",
"backendName": "NasBackend",
"managementLIF": "1.2.3.4",
"dataLIF": "1.2.3.8",
"svm": "vserver_test",
"username": "vsadmin",
"password": "secret",
"storagePrefix": "myPrefix_"
}

#Update backend with tridentctl
$ tridentctl update backend NasBackend -f cert-backend-updated.json -n trident
+------------+----------------+--------------------------------------+--------+---------+
|    NAME    | STORAGE DRIVER |                 UUID                 | STATE  | VOLUMES |
+------------+----------------+--------------------------------------+--------+---------+
| NasBackend | ontap-nas      | 98e19b74-aec7-4a3d-8dcf-128e5033b214 | online |       9 |
+------------+----------------+--------------------------------------+--------+---------+</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="update-authentication-methods-or-rotate-credentials">Update authentication methods or rotate credentials</h3>
<div class="paragraph">
<p>You can update an existing backend to make use of a different authentication method or to rotate their credentials. This works both ways: backends that make use of username/password can be updated to use certificates; backends that utilize certificates can be updated to username/password based. To do this, use an updated <code>backend.json</code> file containing the required parameters to execute <code>tridentctl backend update</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cat cert-backend-updated.json
{
"version": 1,
"storageDriverName": "ontap-nas",
"backendName": "NasBackend",
"managementLIF": "1.2.3.4",
"dataLIF": "1.2.3.8",
"svm": "vserver_test",
"username": "vsadmin",
"password": "secret",
"storagePrefix": "myPrefix_"
}

#Update backend with tridentctl
$ tridentctl update backend NasBackend -f cert-backend-updated.json -n trident
+------------+----------------+--------------------------------------+--------+---------+
|    NAME    | STORAGE DRIVER |                 UUID                 | STATE  | VOLUMES |
+------------+----------------+--------------------------------------+--------+---------+
| NasBackend | ontap-nas      | 98e19b74-aec7-4a3d-8dcf-128e5033b214 | online |       9 |
+------------+----------------+--------------------------------------+--------+---------+</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/trident/images/note.svg" alt="Note">
</td>
<td class="content">
When rotating passwords, the storage administrator must first update the password for the user on ONTAP. This is followed by a backend update. When rotating certificates, multiple certificates can be added to the user. The backend is then updated to use the new certificate, following which the old certificate can be deleted from the ONTAP cluster.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Updating a backend does not disrupt access to volumes that have already been created, nor impact volume connections made after. A successful backend update indicates that Astra Trident can communicate with the ONTAP backend and handle future volume operations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="manage-nfs-export-policies">Manage NFS export policies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Astra Trident uses NFS export policies to control access to the volumes that it provisions.</p>
</div>
<div class="paragraph">
<p>Astra Trident provides two options when working with export policies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Astra Trident can dynamically manage the export policy itself; in this mode of operation, the storage administrator specifies a list of CIDR blocks that represent admissible IP addresses. Astra Trident adds node IPs that fall in these ranges to the export policy automatically. Alternatively, when no CIDRs are specified, any global-scoped unicast IP found on the nodes will be added to the export policy.</p>
</li>
<li>
<p>Storage administrators can create an export policy and add rules manually. Astra Trident uses the default export policy unless a different export policy name is specified in the configuration.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="dynamically-manage-export-policies">Dynamically manage export policies</h3>
<div class="paragraph">
<p>The 20.04 release of CSI Trident provides the ability to dynamically manage export policies for ONTAP backends. This provides the storage administrator the ability to specify a permissible address space for worker node IPs, rather than defining explicit rules manually. It greatly simplifies export policy management; modifications to the export policy no longer require manual intervention on the storage cluster. Moreover, this helps restrict access to the storage cluster only to worker nodes that have IPs in the range specified, supporting a finegrained and automated managment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/trident/images/note.svg" alt="Note">
</td>
<td class="content">
The dynamic management of export policies is only available for CSI Trident. It is important to ensure that the worker nodes are not being NATed.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="example">Example</h4>
<div class="paragraph">
<p>There are two configuration options that must be used. Here’s an example backend definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "version": 1,
    "storageDriverName": "ontap-nas",
    "backendName": "ontap_nas_auto_export,
    "managementLIF": "192.168.0.135",
    "svm": "svm1",
    "username": "vsadmin",
    "password": "FaKePaSsWoRd",
    "autoExportCIDRs": ["192.168.0.0/24"],
    "autoExportPolicy": true
}</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/trident/images/note.svg" alt="Note">
</td>
<td class="content">
When using this feature, you must ensure that the root junction in your SVM has a precreated export policy with an export rule that permits the node CIDR block (such as the default export policy). Always follow NetApp’s recommended best practice of dedicating a SVM for Astra Trident.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is an explanation of how this feature works using the example above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>autoExportPolicy</code> is set to <code>true</code>. This indicates that Astra Trident will create an export policy for the <code>svm1</code> SVM and handle the addition and deletion of rules using <code>autoExportCIDRs</code> address blocks. For example, a backend with UUID 403b5326-8482-40db-96d0-d83fb3f4daec and <code>autoExportPolicy</code> set to <code>true</code> creates an export policy named <code>trident-403b5326-8482-40db-96d0-d83fb3f4daec</code> on the SVM.</p>
</li>
<li>
<p><code>autoExportCIDRs</code> contains a list of address blocks. This field is optional and it defaults to ["0.0.0.0/0", "::/0"]. If not defined, Astra Trident adds all globally-scoped unicast addresses found on the worker nodes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this example, the <code>192.168.0.0/24</code> address space is provided. This indicates that Kubernetes node IPs that fall within this address range will be added to the export policy that Astra Trident creates. When Astra Trident registers a node it runs on, it retrieves the IP addresses of the node and checks them against the address blocks provided in <code>autoExportCIDRs</code>. After filtering the IPs, Astra Trident creates export policy rules for the client IPs it discovers, with one rule for each node it identifies.</p>
</div>
<div class="paragraph">
<p>You can update <code>autoExportPolicy</code> and <code>autoExportCIDRs</code> for backends after you create them. You can append new CIDRs for a backend that is automatically managed or delete existing CIDRs. Exercise care when deleting CIDRs to ensure that existing connections are not dropped. You can also choose to disable <code>autoExportPolicy</code> for a backend and fall back to a manually created export policy. This will require setting the <code>exportPolicy</code> parameter in your backend config.</p>
</div>
<div class="paragraph">
<p>After Astra Trident creates or updates a backend, you can check the backend using <code>tridentctl</code> or the corresponding <code>tridentbackend</code> CRD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./tridentctl get backends ontap_nas_auto_export -n trident -o yaml
items:
- backendUUID: 403b5326-8482-40db-96d0-d83fb3f4daec
  config:
    aggregate: ""
    autoExportCIDRs:
    - 192.168.0.0/24
    autoExportPolicy: true
    backendName: ontap_nas_auto_export
    chapInitiatorSecret: ""
    chapTargetInitiatorSecret: ""
    chapTargetUsername: ""
    chapUsername: ""
    dataLIF: 192.168.0.135
    debug: false
    debugTraceFlags: null
    defaults:
      encryption: "false"
      exportPolicy: &lt;automatic&gt;
      fileSystemType: ext4</pre>
</div>
</div>
<div class="paragraph">
<p>As nodes are added to a Kubernetes cluster and registered with the Astra Trident controller, export policies of existing backends are updated (provided they fall in the address range specified in <code>autoExportCIDRs</code> for the backend).</p>
</div>
<div class="paragraph">
<p>When a node is removed, Astra Trident checks all backends that are online to remove the access rule for the node. By removing this node IP from the export policies of managed backends, Astra Trident prevents rogue mounts, unless this IP is reused by a new node in the cluster.</p>
</div>
<div class="paragraph">
<p>For previously existing backends, updating the backend with <code>tridentctl update backend</code> will ensure that Astra Trident manages the export policies automatically. This will create a new export policy named after the backend’s UUID and volumes that are present on the backend will use the newly created export policy when they are mounted again.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/trident/images/note.svg" alt="Note">
</td>
<td class="content">
Deleting a backend with auto-managed export policies will delete the dynamically created export policy. If the backend is re-created, it is treated as a new backend and will result in the creation of a new export policy.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the IP address of a live node is updated, you must restart the Astra Trident pod on the node. Astra Trident will then update the export policy for backends it manages to reflect this IP change.</p>
</div>
</div>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div id="version-dropdown"></div>
    <div class="page-nav-contribute"  >
      <a target="_blank" href="https://github.com/NetAppDocs/trident/issues/new?body=Page%3A%20[Preparation](https://docs.netapp.com/us-en/trident/trident-use/ontap-nas-prep.html)" class="page-nav-contribute-link" role="button"><img src="/us-en/trident/images/discuss-sm.svg" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://github.com/NetAppDocs/trident/blob/main/trident-use/ontap-nas-prep.adoc" class="page-nav-contribute-link" role="button"><img src="/us-en/trident/images/edit-sm.svg" class="github-icon" />Edit this page</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  ><img src="/us-en/trident/images/article-sm.svg" class="github-icon" />Learn how to contribute</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2021 NetApp, Inc.</a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/trident/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/trident/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/trident/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/trident/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/trident/js/www-ntap.js'></script>
    <script src='/us-en/trident/js/tabbed-blocks.js'></script>
  </body>

  
</html>
